<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>K8S 入门 | A game without a solution</title>
    <meta name="description" content="Just taking notes">
    <link rel="stylesheet" href="/docs/assets/style.9f70d7ba.css">
    <link rel="modulepreload" href="/docs/assets/app.dbf731ef.js">
    <link rel="modulepreload" href="/docs/assets/k8s_kubernetes_quick-install-k8s.md.9b5bc421.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-ca9ccb7e><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-ca9ccb7e data-v-a71a30f1><div class="VPNavBar has-sidebar" data-v-a71a30f1 data-v-a35e6f52><div class="container" data-v-a35e6f52><div class="VPNavBarTitle has-sidebar" data-v-a35e6f52 data-v-d5925166><a class="title" href="/docs/" data-v-d5925166><!--[--><!--]--><!----><!--[-->A game without a solution<!--]--><!--[--><!--]--></a></div><div class="content" data-v-a35e6f52><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a35e6f52 data-v-f83db6ba><span id="main-nav-aria-label" class="visually-hidden" data-v-f83db6ba>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/go/mac-install-go" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->Go<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/docs/k8s/introduction" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->K8S<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/deploy/introduction" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->Deploy<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/rust/introduction" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->Rust<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a35e6f52 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-a3e7452b data-v-968780f1 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-968780f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-968780f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a35e6f52 data-v-738bef5a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/sword-demon" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a35e6f52 data-v-e89b88d7 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e89b88d7><div class="item appearance" data-v-e89b88d7><p class="label" data-v-e89b88d7>Appearance</p><div class="appearance-action" data-v-e89b88d7><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-e89b88d7 data-v-968780f1 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-968780f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-968780f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e89b88d7><div class="item social-links" data-v-e89b88d7><div class="VPSocialLinks social-links-list" data-v-e89b88d7 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/sword-demon" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a35e6f52 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-ca9ccb7e data-v-aac27d5e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-aac27d5e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-aac27d5e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-aac27d5e>Menu</span></button><a class="top-link" href="#" data-v-aac27d5e> Return to top </a></div><aside class="VPSidebar" data-v-ca9ccb7e data-v-f332cb62><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-f332cb62><span class="visually-hidden" id="sidebar-aria-label" data-v-f332cb62> Sidebar Navigation </span><!--[--><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>简介</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/docs/k8s/introduction" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>介绍</span><!----><!--]--><!----></a><a class="VPLink link link" href="/docs/k8s/k8s-components" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>组件结构</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>cue-lang</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/docs/k8s/cue/base" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>cue介绍和基本使用</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Docker</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/docs/k8s/docker/install" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>安装Docker</span><!----><!--]--><!----></a><a class="VPLink link link" href="/docs/k8s/docker/base-op" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Docker基础操作</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>K8S速学</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/docs/k8s/kubernetes/deploy-rancher2-k8s" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>快速部署Rancher2和K8S集群</span><!----><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-ca9ccb7e data-v-8af69dc9><div class="VPDoc has-sidebar has-aside" data-v-8af69dc9 data-v-f0af2311><div class="container" data-v-f0af2311><div class="aside" data-v-f0af2311><div class="aside-curtain" data-v-f0af2311></div><div class="aside-container" data-v-f0af2311><div class="aside-content" data-v-f0af2311><div class="VPDocAside" data-v-f0af2311 data-v-aea49c31><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-aea49c31 data-v-e03d48a8><div class="content" data-v-e03d48a8><div class="outline-marker" data-v-e03d48a8></div><div class="outline-title" data-v-e03d48a8>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-e03d48a8><span class="visually-hidden" id="doc-outline-aria-label" data-v-e03d48a8> Table of Contents for current page </span><ul class="root" data-v-e03d48a8><!--[--><li style="" data-v-e03d48a8><a class="outline-link" href="#minikube" data-v-e03d48a8>minikube</a><!----></li><li style="" data-v-e03d48a8><a class="outline-link" href="#rancher-安装-k8s-集群" data-v-e03d48a8>rancher 安装 K8S 集群</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-aea49c31></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f0af2311><div class="content-container" data-v-f0af2311><!--[--><!--]--><main class="main" data-v-f0af2311><div style="position:relative;" class="vp-doc _docs_k8s_kubernetes_quick-install-k8s" data-v-f0af2311><div><h1 id="k8s-入门" tabindex="-1">K8S 入门 <a class="header-anchor" href="#k8s-入门" aria-hidden="true">#</a></h1><blockquote><p><code>Kubernetes</code>就是一个<strong>生产级别的容器编排平台和集群管理系统</strong>，不仅能够创建、调度容器，还能够监控，管理服务器，它凝聚了<code>Google</code>等大公司和开源社区的集体智慧，从而实现轻松运维海量计算节点——也就是”云计算“的能力。</p></blockquote><h2 id="minikube" tabindex="-1">minikube <a class="header-anchor" href="#minikube" aria-hidden="true">#</a></h2><p><code>K8S</code>一般都是运行在大规模的计算集群上，管理很严格，对个人来说比较有障碍，所以有一些实际的操作环境好学好用。</p><p>在官网它提供了 <a href="https://kubernetes.io/zh/docs/tasks/tools/" target="_blank" rel="noreferrer">https://kubernetes.io/zh/docs/tasks/tools/</a></p><p>几个安装工具，初学入门推荐的有<code>kind</code>和<code>minikube</code>，他们都可以在本机上运行完整的<code>K8S</code>环境。</p><blockquote><p>kind 基于 Docker，意思是“Kubernetes in Docker”。它功能少，用法简单，也因此运行速度快，容易上手。不过它缺少很多 Kubernetes 的标准功能，例如仪表盘、网络插件，也很难定制化，所以我认为它比较适合有经验的 Kubernetes 用户做快速开发测试，不太适合学习研究。不选 kind 还有一个原因，它的名字与 Kubernetes YAML 配置里的字段 kind 重名，会对初学者造成误解，干扰学习。再来看 minikube，从名字就能够看出来，它是一个“迷你”版本的 Kubernetes，自从 2016 年发布以来一直在积极地开发维护，紧跟 Kubernetes 的版本更新，同时也兼容较旧的版本（最多只到之前的 6 个小版本）。minikube 最大特点就是“小而美”，可执行文件仅有不到 100MB，运行镜像也不过 1GB，但就在这么小的空间里却集成了 Kubernetes 的绝大多数功能特性，不仅有核心的容器编排功能，还有丰富的插件，例如 Dashboard、GPU、Ingress、Istio、Kong、Registry 等等，综合来看非常完善。</p></blockquote><h3 id="搭建-minikube-环境" tabindex="-1">搭建 minikube 环境 <a class="header-anchor" href="#搭建-minikube-环境" aria-hidden="true">#</a></h3><p>官网地址：<a href="https://minikube.sigs.k8s.io/docs/" target="_blank" rel="noreferrer">https://minikube.sigs.k8s.io/docs/</a></p><p>我们选择使用<code>minikube</code> 的最新版本是 1.25.2，支持的 <code>Kubernetes</code> 版本是 1.23.3。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>需要注意一下本机电脑的硬件架构，<code>Intel</code>芯片要选择带<code>amd64</code>后缀，<code>Apple M1</code>芯片要选择<code>arm64</code>后缀，选错了就会因为<code>CPU</code>指令不同而无法运行。</p></div><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221022181446.png" alt=""></p><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-arm64</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo install minikube-linux-arm64 /usr/local/bin/minikube</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">wxvirus@ARM-Virtual-Machine:</span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">$ minikube version</span></span>
<span class="line"><span style="color:#A6ACCD;">minikube version: v1.27.1</span></span>
<span class="line"><span style="color:#A6ACCD;">commit: fe869b5d4da11ba318eb84a3ac00f336411de7ba</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>要操作<code>K8S</code>还需要专门的客户端工具<code>kubectl</code>，也是一个命令行工具，将<code>k8s</code>后台服务通信，把我们的命令转发给<code>k8s</code>，实现容器和集群的管理功能。它是和<code>k8s</code>和<code>minikube</code>彼此独立的项目，需要额外完整，但是<code>minikube</code>提供了安装它的简化方式：</p><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">wxvirus@ARM-Virtual-Machine:</span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">$ minikube kubectl</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> kubectl.sha256:  64 B / 64 B </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-------------------------</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> 100.00% </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> p/s 0s</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> kubectl:  41.56 MiB / 41.56 MiB </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">------------</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> 100.00% 21.88 MiB p/s 2.1s</span></span>
<span class="line"><span style="color:#A6ACCD;">kubectl controls the Kubernetes cluster manager.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> Find more information at: https://kubernetes.io/docs/reference/kubectl/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Basic Commands </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Beginner</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  create          Create a resource from a file or from stdin</span></span>
<span class="line"><span style="color:#A6ACCD;">  expose          Take a replication controller, service, deployment or pod and expose it as a new Kubernetes service</span></span>
<span class="line"><span style="color:#A6ACCD;">  run             在集群上运行特定镜像</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;">             为对象设置指定特性</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Basic Commands </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Intermediate</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  explain         Get documentation </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> a resource</span></span>
<span class="line"><span style="color:#A6ACCD;">  get             显示一个或多个资源</span></span>
<span class="line"><span style="color:#A6ACCD;">  edit            编辑服务器上的资源</span></span>
<span class="line"><span style="color:#A6ACCD;">  delete          Delete resources by file names, stdin, resources and names, or by resources and label selector</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Deploy Commands:</span></span>
<span class="line"><span style="color:#A6ACCD;">  rollout         Manage the rollout of a resource</span></span>
<span class="line"><span style="color:#A6ACCD;">  scale           Set a new size </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> a deployment, replica set, or replication controller</span></span>
<span class="line"><span style="color:#A6ACCD;">  autoscale       Auto-scale a deployment, replica set, stateful set, or replication controller</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Cluster Management Commands:</span></span>
<span class="line"><span style="color:#A6ACCD;">  certificate     修改证书资源。</span></span>
<span class="line"><span style="color:#A6ACCD;">  cluster-info    Display cluster information</span></span>
<span class="line"><span style="color:#A6ACCD;">  top             Display resource </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">CPU/memory</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> usage</span></span>
<span class="line"><span style="color:#A6ACCD;">  cordon          标记节点为不可调度</span></span>
<span class="line"><span style="color:#A6ACCD;">  uncordon        标记节点为可调度</span></span>
<span class="line"><span style="color:#A6ACCD;">  drain           清空节点以准备维护</span></span>
<span class="line"><span style="color:#A6ACCD;">  taint           更新一个或者多个节点上的污点</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Troubleshooting and Debugging Commands:</span></span>
<span class="line"><span style="color:#A6ACCD;">  describe        显示特定资源或资源组的详细信息</span></span>
<span class="line"><span style="color:#A6ACCD;">  logs            打印 Pod 中容器的日志</span></span>
<span class="line"><span style="color:#A6ACCD;">  attach          挂接到一个运行中的容器</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;">            在某个容器中执行一个命令</span></span>
<span class="line"><span style="color:#A6ACCD;">  port-forward    将一个或多个本地端口转发到某个 Pod</span></span>
<span class="line"><span style="color:#A6ACCD;">  proxy           运行一个指向 Kubernetes API 服务器的代理</span></span>
<span class="line"><span style="color:#A6ACCD;">  cp              Copy files and directories to and from containers</span></span>
<span class="line"><span style="color:#A6ACCD;">  auth            Inspect authorization</span></span>
<span class="line"><span style="color:#A6ACCD;">  debug           Create debugging sessions </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> troubleshooting workloads and nodes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Advanced Commands:</span></span>
<span class="line"><span style="color:#A6ACCD;">  diff            Diff the live version against a would-be applied version</span></span>
<span class="line"><span style="color:#A6ACCD;">  apply           Apply a configuration to a resource by file name or stdin</span></span>
<span class="line"><span style="color:#A6ACCD;">  patch           Update fields of a resource</span></span>
<span class="line"><span style="color:#A6ACCD;">  replace         Replace a resource by file name or stdin</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">wait</span><span style="color:#A6ACCD;">            Experimental: Wait </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> a specific condition on one or many resources</span></span>
<span class="line"><span style="color:#A6ACCD;">  kustomize       Build a kustomization target from a directory or URL.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Settings Commands:</span></span>
<span class="line"><span style="color:#A6ACCD;">  label           更新某资源上的标签</span></span>
<span class="line"><span style="color:#A6ACCD;">  annotate        更新一个资源的注解</span></span>
<span class="line"><span style="color:#A6ACCD;">  completion      Output shell completion code </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> the specified shell </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">bash, zsh, fish, or powershell</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Other Commands:</span></span>
<span class="line"><span style="color:#A6ACCD;">  alpha           Commands </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> features </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> alpha</span></span>
<span class="line"><span style="color:#A6ACCD;">  api-resources   Print the supported API resources on the server</span></span>
<span class="line"><span style="color:#A6ACCD;">  api-versions    Print the supported API versions on the server, </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> the form of </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">group/version</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  config          修改 kubeconfig 文件</span></span>
<span class="line"><span style="color:#A6ACCD;">  plugin          Provides utilities </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> interacting with plugins</span></span>
<span class="line"><span style="color:#A6ACCD;">  version         输出客户端和服务端的版本信息</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Usage:</span></span>
<span class="line"><span style="color:#A6ACCD;">  kubectl </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">flags</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Use </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">kubectl &lt;command&gt; --help</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> more information about a given command.</span></span>
<span class="line"><span style="color:#A6ACCD;">Use </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">kubectl options</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> a list of global command-line options </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">applies to all commands</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h3 id="验证-minikube-环境" tabindex="-1">验证 minikube 环境 <a class="header-anchor" href="#验证-minikube-环境" aria-hidden="true">#</a></h3><p>运行<code>minikube</code>，创建<code>k8s</code>实验环境，指定<code>k8s</code>版本为<code>1.23.3</code></p><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">minikube start --kubernetes-version=v1.23.3</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221022183302.png" alt="启动过程"></p><p>使用下面命令等他完全启动之后查看集群的状态：</p><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">minikube status</span></span>
<span class="line"><span style="color:#A6ACCD;">minikube node list</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这安装的时间有点长。。。我暂时不等这个了</p><h2 id="rancher-安装-k8s-集群" tabindex="-1">rancher 安装 K8S 集群 <a class="header-anchor" href="#rancher-安装-k8s-集群" aria-hidden="true">#</a></h2><h3 id="准备工作" tabindex="-1">准备工作 <a class="header-anchor" href="#准备工作" aria-hidden="true">#</a></h3><ol><li><p>非必须</p><ol><li><p>停止所有容器</p><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker stop </span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">docker ps -a -q</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li><li><p>删除所有容器</p><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker rm </span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">docker ps -a -q</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol></li><li><p>必须</p><ol><li><p>关闭防火墙，如果有<code>iptables</code>也全部干掉</p><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">systemctl stop firewalld </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> systemctl disable firewalld</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li><li><p>关闭<code>selinux</code></p><ol><li><code>setenforce 0</code></li><li><code>set -i&#39;s/SELINUX=enforcing/SELINUX=disabled/g&#39; /etc/selinux/config</code></li></ol></li><li><p>关闭<code>swap</code></p><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">swapoff -a</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol></li><li><p>重启<code>docker</code></p><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl daemon-reload</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl restart docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol><h3 id="docker-安装" tabindex="-1">docker 安装 <a class="header-anchor" href="#docker-安装" aria-hidden="true">#</a></h3><p>由于一些原因，使用官方镜像源安装慢，可以使用如下命令进行安装，不过</p><p><code>-v /home/wxvirus/rancher:/var/lib/rancher</code>前面部分换成自己的路径，这里使用的是国内的，比较快。</p><div class="warning custom-block"><p class="custom-block-title">注意</p><p>一定要在你的用户目录下新建一个<code>rancher</code>目录</p></div><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -itd --privileged  -p 8080:80 -p 8443:443 \</span></span>
<span class="line"><span style="color:#A6ACCD;">-v /home/wxvirus/rancher:/var/lib/rancher \</span></span>
<span class="line"><span style="color:#A6ACCD;">--restart=unless-stopped  -e CATTLE_AGENT_IMAGE=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">registry.cn-hangzhou.aliyuncs.com/rancher/rancher-agent:v2.4.8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  registry.cn-hangzhou.aliyuncs.com/rancher/rancher:v2.4.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221023010945.png" alt=""></p><p>我们在浏览器中输入<code>192.168.0.110:8080</code>，它会自动跳转到<code>8443</code>端口，如果出现什么安全警告，点击继续前往即可。</p><blockquote><p>第一次进入会让你修改密码，输入你自己的密码，然后点击统一继续即可。</p></blockquote><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221023011211.png" alt=""></p><p>这里一般需要配置你的内网的<code>ip</code>地址，我这是虚拟机，我还是直接填入得了。</p><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221023012324250.png" alt="image-20221023012324250"></p><p>可以通过下面的语言进行调整为中文。</p><p>我们点击新建集群</p><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221023012141248.png" alt="image-20221023012141248"></p><p>只输入一个集群名称，即可，什么都不用改别的，然后直接下一步；</p><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221023012231.png" alt=""></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>需要将上面三个都勾选上，然后复制下面的命令在主节点进行运行，当前的还是<code>rancher</code>节点，只是安装<code>rancher</code>的</p></div><p><code>master-node</code></p><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo docker run -d --privileged --restart=unless-stopped --net=host -v /etc/kubernetes:/etc/kubernetes -v /var/run:/var/run registry.cn-hangzhou.aliyuncs.com/rancher/rancher-agent:v2.4.8 --server https://192.168.0.110:8443 --token t4qmt4j6hcfqt2j8pmw4pmfwtrp8wgp575rl5zdhlq5hwqvf9vg8gg --ca-checksum 89e4df5af647ae28d467cc54e426a5ea771ff48a29f953a42712a373305e1e88 --etcd --controlplane --worker</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>下面是<code>worker</code>节点，把上面的，除了<code>Worker</code>以外的都勾选掉，来<code>worker</code>节点进行运行</p><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo docker run -d --privileged --restart=unless-stopped --net=host -v /etc/kubernetes:/etc/kubernetes -v /var/run:/var/run registry.cn-hangzhou.aliyuncs.com/rancher/rancher-agent:v2.4.8 --server https://192.168.0.110:8443 --token t4qmt4j6hcfqt2j8pmw4pmfwtrp8wgp575rl5zdhlq5hwqvf9vg8gg --ca-checksum 89e4df5af647ae28d467cc54e426a5ea771ff48a29f953a42712a373305e1e88 --worker</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后静静等待安装，会有很多镜像需要下载，等到出现以下内容</p><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221023013549.png" alt=""></p><p>看到一个明显的<code>active</code>就代表可以了。</p><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221023013751.png" alt=""></p><p>我这还是有点警告内容的，磁盘压力大，看来还是虚拟机不得劲。</p><p>如果正常情况来整，你会看到主机有 3 个绿色的<code>active</code>状态即可。</p><div class="danger custom-block"><p class="custom-block-title">注意</p><p>不要使用端口<code>6443</code>，这应该是<code>K8S API</code>会调用的端口，否则会提示<code>6443</code>端口占用。</p></div><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221111234355204.png" alt="image-20221111234355204"></p><p>这边提示<code>k8s-node1</code>还没激活，再继续等一会，它还没注册完。</p><p>就算出现</p><div class="language- line-numbers-mode"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">Runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:docker: network plugin is not ready: cni config uninitialized</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个也不要惊慌，继续等，最终会变成<code>Active</code></p><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221111234609858.png" alt="image-20221111234609858"></p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-f0af2311 data-v-a54a85bd><div class="edit-info" data-v-a54a85bd><div class="edit-link" data-v-a54a85bd><a class="VPLink link edit-link-button" href="https://gitee.com/wxvirus/docs/edit/master/docs/k8s/kubernetes/quick-install-k8s.md" target="_blank" rel="noreferrer" data-v-a54a85bd data-v-3c355974><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-a54a85bd><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on Gitee<!--]--><!----></a></div><div class="last-updated" data-v-a54a85bd><p class="VPLastUpdated" data-v-a54a85bd data-v-f7d51a9c>Last updated: <time datatime="2022-11-19T12:30:59.000Z" data-v-f7d51a9c></time></p></div></div><div class="prev-next" data-v-a54a85bd><div class="pager" data-v-a54a85bd><!----></div><div class="pager" data-v-a54a85bd><a class="pager-link next" href="/docs/k8s/introduction" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Next page</span><span class="title" data-v-a54a85bd>介绍</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-ca9ccb7e data-v-9f24cc86><div class="container" data-v-9f24cc86><p class="message" data-v-9f24cc86>Released under the MIT License.</p><p class="copyright" data-v-9f24cc86>Copyright © 2022-present Licrone</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"deploy_introduction.md\":\"5188a55c\",\"deploy_linux-install-nginx.md\":\"fa74f7de\",\"deploy_php-compile-install.md\":\"d43a6c21\",\"go_concurrent_go-pipe.md\":\"11d026f1\",\"go_concurrent_introduction.md\":\"871f34c1\",\"go_func-timeout.md\":\"f777ce54\",\"go_ginskill_common-error-result.md\":\"fb82accd\",\"go_ginskill_common-error.md\":\"d66d8ec0\",\"go_ginskill_common-response.md\":\"b9bd43dc\",\"go_ginskill_model-constructor.md\":\"bbe575e5\",\"go_ginskill_ratelimite.md\":\"086e92fe\",\"go_go-reflect.md\":\"fe6ff00c\",\"go_go-slice.md\":\"6feb82dc\",\"go_go-some-base.md\":\"057c1774\",\"go_interview_go-abstract-factory.md\":\"e4d76006\",\"go_interview_go-chan-dialog.md\":\"3c64b02d\",\"go_interview_go-coroutine-dispatch.md\":\"1c689f10\",\"go_interview_go-decorator.md\":\"8144a92c\",\"go_interview_go-defer-question.md\":\"9ee0c698\",\"go_interview_go-get-file-line.md\":\"70fcaa51\",\"go_interview_go-io-close-chan.md\":\"7485da0a\",\"go_interview_go-kv-map-get.md\":\"a7f9c262\",\"go_interview_go-memory-escape.md\":\"c36c66a0\",\"go_interview_go-nil-not-equal.md\":\"8d7e7311\",\"go_interview_go-prefix-tree.md\":\"13858f5e\",\"go_interview_go-raft.md\":\"9d4d9ba4\",\"go_interview_go-simple-factory.md\":\"0cf9d9ce\",\"go_interview_go-simple-set.md\":\"6e35b163\",\"go_interview_go-singleton.md\":\"51287ff3\",\"go_interview_go-sq-copy.md\":\"1843489c\",\"go_interview_go-struct-compare.md\":\"571eb72a\",\"go_interview_goroutine-why-last-output.md\":\"459a4cd8\",\"go_limit-goroutine-run.md\":\"c30dd95e\",\"go_mac-install-go.md\":\"8aba898d\",\"go_proto3-syntax.md\":\"734775d7\",\"go_ws_base.md\":\"3043d8b4\",\"go_ws_store-client-obj.md\":\"34a14265\",\"index.md\":\"2aa6ed10\",\"k8s_cue_base.md\":\"06a5e8c9\",\"k8s_docker_base-op.md\":\"a3aa0c0b\",\"k8s_docker_install.md\":\"fdde7fd7\",\"k8s_introduction.md\":\"d19a797b\",\"k8s_k8s-components.md\":\"862f1fe4\",\"k8s_kubernetes_deploy-rancher2-k8s.md\":\"647fd07d\",\"k8s_kubernetes_k8s-onhand.md\":\"c50a7d49\",\"k8s_kubernetes_quick-install-k8s.md\":\"9b5bc421\",\"rust_base_cargo-vscode-config.md\":\"0c954798\",\"rust_base_first-rust.md\":\"3b754353\",\"rust_base_fn-pass-vari.md\":\"6e21c99a\",\"rust_base_rust-basetype-vari.md\":\"8a06cf2d\",\"rust_base_rust-expression.md\":\"fa550160\",\"rust_base_rust-fn-module.md\":\"54bf41b9\",\"rust_base_rust-str-exercise.md\":\"740d894f\",\"rust_base_struct-base.md\":\"d46fb8b3\",\"rust_base_win-install.md\":\"b11a0292\",\"rust_introduction.md\":\"7dea0a90\"}")</script>
    <script type="module" async src="/docs/assets/app.dbf731ef.js"></script>
    
  </body>
</html>